<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>nymeria_ardrone: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">nymeria_ardrone
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">nymeria_ardrone Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>nymeria_ardrone is a <a href="http://ros.org/" title="Robot Operating System">ROS</a> package for <a href="http://ardrone2.parrot.com/">Parrot AR-Drone</a> quadrocopter. It acts as a layer and filters drone commands sent from an external controller. It helps the drone determine if movement orders are safe or not depending on the trajectory of an obstacle and, if so, to move accordingly. In practice it contains three main modules. The first, linked to sensors, allows the drone to detect an obstacle. The second gets drone commands and the last makes the link between them. User defines radius of an obstacle and drone is controlled by <a class="el" href="class_nymeria.html" title="Definitions of the class Nymeria, that declares all functionalities in order to allow for drone navig...">Nymeria</a> to slow down and stop in front of it. The driver supports AR-Drone 2.0.</p>
<h2>Table of Contents</h2>
<ul>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#how-to-run">How to run it</a></li>
<li><a href="#how-does-it-work">How does it work</a></li>
</ul>
<h2>Requirements</h2>
<ul>
<li><em>ROS</em>: <a href="http://wiki.ros.org/ROS/Installation">Robot Operating System</a></li>
<li><em>ardrone_autonomy</em>: <a href="https://github.com/AutonomyLab/ardrone_autonomy">Driver for Ardrone 1.0 &amp; 2.0</a></li>
<li><em>Sensor</em>: any kind of tool enabling to retrieve range between drone and front obstacles</li>
</ul>
<h2>Installation</h2>
<p>The first step is to install ROS following the <a href="http://wiki.ros.org/ROS/Installation">(Robot Operating System installation tutorial)</a>. We have successfully tested two versions : hydro and indigo.</p>
<p>Then create a <a href="http://wiki.ros.org/ROS/Tutorials/InstallingandConfiguringROSEnvironment#Create_a_ROS_Workspace">ROS workspace</a>.</p>
<p>In order to communicate with the drone you will need to download <a href="https://github.com/AutonomyLab/ardrone_autonomy">ardrone_autonomy</a> which provide the ardrone_driver. Follow the instruction in the <a href="https://github.com/AutonomyLab/ardrone_autonomy#installation">installation section</a>.</p>
<p>Navigate to your catkin_workspace sources repository. </p><blockquote class="doxtable">
<p>$ cd ~/catkin_ws/src </p>
</blockquote>
<p>Download the nymeria_ardrone package using the following command in a terminal. </p><blockquote class="doxtable">
<p>$ git clone <a href="https://github.com/jdufant/nymeria_ardrone">https://github.com/jdufant/nymeria_ardrone</a> </p>
</blockquote>
<p>You might prefer to reach <a href="https://github.com/jdufant/nymeria_ardrone">nymeria_ardrone webpage</a> and download and unpack the nymeria_ardrone package.</p>
<p>Go back to your root workspace repository. </p><blockquote class="doxtable">
<p>$ cd ~/catkin_ws </p>
</blockquote>
<p>Use the catkin_make command to compile </p><blockquote class="doxtable">
<p>$ catkin_make </p>
</blockquote>
<h2>How to run it</h2>
<p>First switch on Wifi on your computer and connect it to your Ardrone 2.0.</p>
<p>You must launch the master node. Navigate to your catkin_workspace (<code>$ cd ~/catkin_ws</code>) and type the following command : </p><blockquote class="doxtable">
<p>$ roscore </p>
</blockquote>
<p>Then launch the ardrone_autonomy driver's executable node. You can use : </p><blockquote class="doxtable">
<p>$ rosrun ardrone_autonomy ardrone_driver </p>
</blockquote>
<p>Or put it in a custom launch file with your desired parameters.</p>
<p>Navigate to ~/catkin_ws/src/nymeria_ardrone/src/SensorInterface.cpp and find the line <em>nco.inputCurFrontDist(cutValue);</em> Replace the 'cutValue' variable by the current distance of the front sensor of your drone. Once done, run the sensor_interface node : </p><blockquote class="doxtable">
<p>$ rosrun nymeria_ardrone nymeria_sensor_interface </p>
</blockquote>
<p>By default the security distance is 100 cm. To change it just call the setSecurityDist(double secDist) from the class <a class="el" href="class_nymeria_check_obstacle.html">NymeriaCheckObstacle</a>. </p><div class="fragment"><div class="line"><span class="keywordtype">double</span> getSecurityDist();</div>
<div class="line"><span class="keywordtype">void</span> setSecurityDist(<span class="keywordtype">double</span> secDist);</div>
</div><!-- fragment --><p>By default the sensor max range is 350 cm. To change it just call the setSensorMaxRange(double range) from the class <a class="el" href="class_nymeria_check_obstacle.html">NymeriaCheckObstacle</a>. </p><div class="fragment"><div class="line"><span class="keywordtype">double</span> getSensorMaxRange();</div>
<div class="line"><span class="keywordtype">void</span> setSensorMaxRange(<span class="keywordtype">double</span> range);</div>
</div><!-- fragment --><p>Launch the nymeria_command executable node using : </p><blockquote class="doxtable">
<p>$ rosrun nymeria_ardrone nymeria_command </p>
</blockquote>
<p>This node is the interface between you as a user who wish to send orders and the drone. Command are sent from keystroke detailled below.</p><ul>
<li><em>ENTER</em> : LAND / TAKE OFF</li>
<li><em>Z</em> : move forward</li>
<li><em>S</em> : move backward</li>
<li><em>Q</em> : rotate left</li>
<li><em>D</em> : rotate right</li>
<li><em>UP</em> : move up</li>
<li><em>DOWN</em> : move down</li>
<li><em>i</em> : move down</li>
<li><em>k</em> : move down</li>
<li><em>o</em> : move down</li>
<li><em>l</em> : move down</li>
<li><em>p</em> : move down</li>
<li><em>m</em> : move down</li>
<li><em>SPACE</em> : stop</li>
</ul>
<p>The last step consists to run the launch the Controller node </p><blockquote class="doxtable">
<p>$ rosrun nymeria_ardrone controller </p>
</blockquote>
<p>You are ready to go. Just stroke the appropriate key from the nymeria_command interface. Your drone will naturally keep the inputed security distance between any front obstacle and itself.</p>
<h2>How does it work</h2>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jan 19 2015 11:19:25 for nymeria_ardrone by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
